---
title: ğŸ§…ç±»çº§åˆ«å¼å£°æ˜
date: 2022-10-05 23:22:17
permalink: /pages/v2.13.X/18f548/
---

ç±»çº§åˆ«å¼å£°æ˜ä¸»è¦ç”¨å¤„å°±æ˜¯é€šè¿‡æ³¨è§£å½¢å¼è®©æ™®é€šçš„java beanå˜æˆLiteFlowçš„ç»„ä»¶ã€‚æ— éœ€é€šè¿‡ç»§æ‰¿ç±»æˆ–è€…å®ç°æ¥å£çš„æ–¹å¼ã€‚

ç”±äºLiteFlowçš„ç»„ä»¶å¸¸è§„æ–¹å¼ä¸‹éœ€è¦ç»§æ‰¿ç±»æ¥å®šä¹‰ï¼Œä½¿å¾—ä½ æ— æ³•å†ç»§æ‰¿è‡ªå·±ä¸šåŠ¡çš„ç±»äº†ã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯å’Œå¸¸è§„ç»„ä»¶ä¸€æ ·ï¼Œéœ€è¦ä¸€ä¸ªç±»å¯¹åº”ä¸€ä¸ªç»„ä»¶ã€‚

## æ™®é€šç»„ä»¶çš„å£°æ˜

ä½ å¯ä»¥å¦‚ä¸‹å»è¿›è¡Œä¸€ä¸ªæ™®é€šç»„ä»¶çš„å£°æ˜ï¼š

```java
@LiteflowComponent("a")
public class ACmp{
  
	@LiteflowMethod(LiteFlowMethodEnum.PROCESS, nodeType = NodeTypeEnum.COMMON)
	public void processAcmp(NodeComponent bindCmp) {
		System.out.println("ACmp executed!");
	}
}
```

ä½¿ç”¨è€…æ— éœ€ç»§æ‰¿`NodeComponent`äº†ï¼Œç›¸åº”çš„æ–¹æ³•ä¸ŠåŠ ä¸Š`LiteflowMethod`æ³¨è§£ï¼Œå³å¯å®Œæˆå¯¹ä»»æ„è‡ªå®šä¹‰ç±»çš„ç»„ä»¶åŒ–å·¥ä½œã€‚

å…¶ä¸­`@LiteFlowMethod`çš„ä½œç”¨æ˜¯æŠŠä½ è‡ªå·±çš„å®šä¹‰çš„æ–¹æ³•æ˜ å°„æˆç»„ä»¶çš„æ³¨è§£ã€‚

åŸæœ¬ç»§æ‰¿å¼ç»„ä»¶ä¸­å¯ä»¥è¦†ç›–çš„å‡ ä¸ªæ–¹æ³•ï¼Œåœ¨ç±»å£°æ˜å¼ç»„ä»¶ä¸­ä¹Ÿå¯ä»¥å®šä¹‰ï¼Œéœ€è¦åƒè¿™ä¹ˆå»å®šä¹‰ï¼š

```java
@LiteflowComponent("a")
public class ACmp{
  
	@LiteflowMethod(LiteFlowMethodEnum.PROCESS, nodeType = NodeTypeEnum.COMMON)
	public void processAcmp(NodeComponent bindCmp) {
		System.out.println("ACmp executed!");
	}

	@LiteflowMethod(LiteFlowMethodEnum.IS_ACCESS, nodeType = NodeTypeEnum.COMMON)
	public boolean isAcmpAccess(NodeComponent bindCmp){
		return true;
	}

	@LiteflowMethod(LiteFlowMethodEnum.BEFORE_PROCESS, nodeType = NodeTypeEnum.COMMON)
	public void beforeAcmp(NodeComponent bindCmp){
		System.out.println("before A");
	}

	@LiteflowMethod(LiteFlowMethodEnum.AFTER_PROCESS, nodeType = NodeTypeEnum.COMMON)
	public void afterAcmp(NodeComponent bindCmp){
		System.out.println("after A");
	}

	@LiteflowMethod(LiteFlowMethodEnum.ON_SUCCESS, nodeType = NodeTypeEnum.COMMON)
	public void onAcmpSuccess(NodeComponent bindCmp){
		System.out.println("Acmp success");
	}

	@LiteflowMethod(LiteFlowMethodEnum.ON_ERROR, nodeType = NodeTypeEnum.COMMON)
	public void onAcmpError(NodeComponent bindCmp, Exception e){
		System.out.println("Acmp error");
	}
	
	@LiteflowMethod(LiteFlowMethodEnum.IS_END, nodeType = NodeTypeEnum.COMMON)
	public boolean isAcmpEnd(NodeComponent bindCmp) {
		return false;
	}
    
    @LiteflowMethod(value = LiteFlowMethodEnum.ROLLBACK, nodeType = NodeTypeEnum.COMMON)
    public void rollbackA(NodeComponent bindCmp) throws Exception {
        System.out.println("ACmp rollback!");
    }
}
```

è¿™é‡Œæœ‰å‡ ç‚¹æ³¨æ„çš„äº‹é¡¹ï¼Œå¿…é¡»è¦ä»”ç»†é˜…è¯»ï¼š

* æ–¹æ³•åæ²¡æœ‰è¦æ±‚ï¼Œèµ·ä½ ä»»æ„æƒ³èµ·çš„åå­—ã€‚
* è¿™ä¸ªæ–¹æ³•æ˜¯ä»€ä¹ˆä¸ç”±æ–¹æ³•åå†³å®šï¼Œæ˜¯ç”±@LiteflowMethodæ ‡æ³¨ä¸Šçš„`LiteFlowMethodEnum`å±æ€§å†³å®šã€‚
* æ–¹æ³•ä¸Šå‚æ•°å¿…é¡»ä¼ å…¥`NodeComponent bindCmp`è¿™ä¸ªå‚æ•°ï¼Œè€Œä¸”å¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ã€‚
* ç¢°åˆ°åŸæœ¬å°±æœ‰å‚æ•°çš„ï¼Œæ¯”å¦‚`onError(Exception e)`ï¼Œé‚£ä¹ˆåœ¨å£°æ˜å¼é‡Œå°±æ˜¯`yourMethodName(NodeComponent bindCmp, Exception e)`ã€‚
* åŸæœ¬ç”¨`this`è°ƒç”¨çš„ï¼Œç°åœ¨ç”¨`bindCmp`å¯¹è±¡ä¸­è°ƒç”¨ã€‚
* æ–¹æ³•çš„è¿”å›å€¼è¦å’Œç»§æ‰¿å¼ç»„ä»¶é‡Œçš„è¿”å›å€¼ä¸€è‡´ï¼Œæ¯”å¦‚ç»§æ‰¿å¼çš„å¸ƒå°”ç»„ä»¶çš„`processBoolean`æ–¹æ³•æ˜¯è¿”å›å¸ƒå°”å€¼çš„ï¼Œè¿™é‡Œä¹Ÿè¦è¿”å›å¸ƒå°”å€¼ã€‚å¦‚æœå†™é”™ï¼Œä¼šå¢åŠ ä½ çš„æ’æŸ¥æ—¶é—´ã€‚


## é€‰æ‹©ç»„ä»¶çš„å£°æ˜

@LiteflowMethodä¸Šéœ€è¦åŠ ä¸Š`NodeTypeEnum.SWITCH`å‚æ•°ï¼Œå…¶ä»–è§„åˆ™å’Œæ™®é€šç»„ä»¶ä¸€è‡´ã€‚

```java
@LiteflowComponent("e")
public class ECmp{

    @LiteflowMethod(value = LiteFlowMethodEnum.PROCESS_SWITCH, nodeType = NodeTypeEnum.SWITCH)
    public String processSwitch(NodeComponent bindCmp) throws Exception {
        System.out.println("Ecomp executed!");
        return "g";
    }
}
```

## å¸ƒå°”ç»„ä»¶çš„å£°æ˜

@LiteflowMethodä¸Šéœ€è¦åŠ ä¸Š`NodeTypeEnum.BOOLEAN`å‚æ•°ï¼Œå…¶ä»–è§„åˆ™å’Œæ™®é€šç»„ä»¶ä¸€è‡´ã€‚

```java
@LiteflowComponent("x")
public class XCmp{

	@LiteflowMethod(value = LiteFlowMethodEnum.PROCESS_BOOLEAN, nodeType = NodeTypeEnum.BOOLEAN)
	public boolean processBoolean(NodeComponent bindCmp) throws Exception {
		//do your biz
		return true;
	}
}
```

## æ•°å€¼å¾ªç¯ç»„ä»¶çš„å£°æ˜

@LiteflowMethodä¸Šéœ€è¦åŠ ä¸Š`NodeTypeEnum.FOR`å‚æ•°ï¼Œå…¶ä»–è§„åˆ™å’Œæ™®é€šç»„ä»¶ä¸€è‡´ã€‚

```java
@LiteflowComponent("x")
public class XCmp{

	@LiteflowMethod(value = LiteFlowMethodEnum.PROCESS_FOR, nodeType = NodeTypeEnum.FOR)
	public int processFor(NodeComponent bindCmp) throws Exception {
		//do your biz
		return 10;
	}
}
```

## è¿­ä»£å¾ªç¯ç»„ä»¶çš„å£°æ˜

@LiteflowMethodä¸Šéœ€è¦åŠ ä¸Š`NodeTypeEnum.ITERATOR`å‚æ•°ï¼Œå…¶ä»–è§„åˆ™å’Œæ™®é€šç»„ä»¶ä¸€è‡´ã€‚

```java
@LiteflowComponent("x")
public class XCmp{

	@LiteflowMethod(value = LiteFlowMethodEnum.PROCESS_ITERATOR, nodeType = NodeTypeEnum.ITERATOR)
	public Iterator<?> processIterator(NodeComponent bindCmp) throws Exception {
		//do your biz
		return list.iterator();
	}
}
```
