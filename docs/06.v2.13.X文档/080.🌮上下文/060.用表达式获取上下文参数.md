---
title: ğŸª´ç”¨è¡¨è¾¾å¼è·å–ä¸Šä¸‹æ–‡å‚æ•°
date: 2025-03-30 20:37:14
permalink: /pages/57e00b/
---

**ç‰ˆæœ¬æ”¯æŒï¼š**<Badge text="v2.13.1+" vertical="middle"/>

## ä»‹ç»

å¦‚æœä½ çœ‹è¿‡[ä¸Šä¸‹æ–‡å‚æ•°æ³¨å…¥](/pages/8777f8/)ï¼Œä¸€å®šæ³¨æ„åˆ°äº†ï¼Œä½¿ç”¨ä¸Šä¸‹æ–‡å‚æ•°æ³¨å…¥çš„æ–¹å¼å¯ä»¥è®©ç»„ä»¶å’Œä¸Šä¸‹æ–‡è§£è€¦ã€‚

ä½†æ˜¯`ä¸Šä¸‹æ–‡å‚æ•°æ³¨å…¥`åªé™äºå£°æ˜å¼ç»„ä»¶ä½¿ç”¨ã€‚æœ‰æ²¡æœ‰é€šç”¨ä¸€ç‚¹çš„ç±»ä¼¼æœºåˆ¶å‘¢ï¼Œä½¿å¾—æ™®é€šç»§æ‰¿å¼ç»„ä»¶ä¹Ÿèƒ½ç”¨ï¼Ÿ

è¿™å°±æ˜¯è¿™ä¸ªç« èŠ‚å¸¦æ¥çš„è¡¨è¾¾å¼å–å‚çš„åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½ï¼Œæ— è®ºåœ¨ç»§æ‰¿å¼è¿˜æ˜¯å£°æ˜å¼çš„ç»„ä»¶é‡Œéƒ½å¯ä»¥ä½¿ç”¨ï¼Œç”šè‡³äºåœ¨è„šæœ¬ç»„ä»¶é‡Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚è¿™æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„é€šç”¨ç‰¹æ€§ã€‚

## ç”¨è¡¨è¾¾å¼è·å–å‚æ•°

æˆ‘ä»¬åœ¨ç»„ä»¶é‡Œé¢å†™ä¸šåŠ¡ï¼Œé¦–å…ˆè‚¯å®šå°±æ˜¯è¦æ‹¿åˆ°ä¸Šä¸‹æ–‡ï¼Œåœ¨å£°æ˜å¼ç»„ä»¶é‡Œé€šå¸¸çš„å†™æ³•ä¸ºï¼š

```java
@Component("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
		YourContext context = this.getContextBean(YourContext.class);
        String userCode = context.getUserCode();
		...
	}
}
```

ä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬ä»ä¸Šä¸‹æ–‡ä¸­æ‹¿åˆ°äº†ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”ä»ä¸Šä¸‹æ–‡ä¸­æ‹¿åˆ°äº†`userCode`è¿™ä¸ªå‚æ•°ã€‚

è¿™æ ·å†™çš„å¥½å¤„æ˜¯ç›´è§‚ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœè¿™æ˜¯ä¸€ä¸ªå…¬ç”¨çš„ç»„ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶å°±å¼ºç»‘å®š`YourContext`è¿™ä¸ªå¯¹è±¡äº†ã€‚è™½ç„¶åœ¨LiteFlowä¸­ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡ç»§æ‰¿çš„æ–¹å¼æˆ–è€…å¤šä¸Šä¸‹æ–‡çš„æ–¹å¼æ¥è§£å†³ã€‚ä½†æ˜¯éƒ½æ˜¯æ›²çº¿æ•‘å›½ã€‚

ç°åœ¨ä½ å¯ä»¥è¿™æ ·å†™æ¥è·å¾—userCodeï¼š

```java
@Component("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
		String userCode = this.getContextValue("userCode");
		...
	}
}
```

ç°åœ¨è¿™ä¸ªç»„ä»¶å°±å’Œä½ çš„ä¸Šä¸‹æ–‡å½»åº•è§£è€¦äº†ï¼Œä½ çš„ä¸Šä¸‹æ–‡ä¸­åªè¦æœ‰`userCode`è¿™ä¸ªå±æ€§çš„ï¼Œé‚£éƒ½å¯ä»¥è¢«å–å‡ºæ¥ã€‚

å¦‚æœå±‚çº§æ¯”è¾ƒæ·±ï¼Œè¿˜å¯ä»¥ç”¨ç‚¹æ“ä½œç¬¦ï¼š

```java
@Component("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
		String code = this.getContextValue("member.code");
		...
	}
}
```

ä¸Šè¿°è¡¨è¾¾å¼ï¼Œæ„æ€æ˜¯å–å‡ºä¸Šä¸‹æ–‡ä¸­`member`è¿™ä¸ªå¯¹è±¡ä¸­çš„`code`å­—æ®µçš„å€¼ã€‚

å¦‚æœæœ‰å¤šä¸ªä¸Šä¸‹æ–‡ï¼Œè¡¨è¾¾å¼ä¹Ÿä¼šåŒ¹é…æœ€åˆé€‚çš„é‚£ä¸ªè¿›è¡Œå–å‡ºï¼Œä½ æ— éœ€å…³å¿ƒæœ‰å¤šå°‘ä¸ªä¸Šä¸‹æ–‡ï¼Œä¸Šä¸‹æ–‡æ˜¯ä»€ä¹ˆã€‚

ä½†æ˜¯ï¼Œä½ éœ€è¦æ³¨æ„æœ‰ä¸€ç§ç‰¹ä¾‹ï¼Œé‚£å°±æ˜¯ä½ åœ¨å¤šä¸ªä¸Šä¸‹æ–‡ä¸­æ‹¥æœ‰ç›¸åŒçš„å­—æ®µï¼Œæ¯”å¦‚ç°åœ¨è¿™ä¸ªæµç¨‹ä¸­ä¼ å…¥äº†3ä¸ªä¸Šä¸‹æ–‡ï¼š
```java
public class OrderContext{
    private String code;
    ...
}
```
```java
public class MemberContext{
    private String code;
    ...
}
```
```java
public class AuthContext{
    private String code;
    ...
}
```

è¿™æ—¶å€™çš„`this.getContextValue("code");`å–å‡ºçš„åˆ°åº•æ˜¯å“ªä¸€ä¸ªå‘¢ï¼Ÿ

LiteFlowæ¡†æ¶åœ¨è¿™ç§æƒ…å†µä¸‹ ï¼Œåªä¼šè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å­—æ®µçš„å€¼ã€‚å¦‚æœä½ éœ€è¦ç²¾ç¡®æŒ‡å®šæ˜¯æŸä¸ªContextä¸‹çš„codeã€‚åˆ™éœ€è¦åœ¨è¡¨è¾¾å¼ä¸­åŠ ä¸Šä¸Šä¸‹æ–‡çš„å‰ç¼€ï¼š
```java
@Component("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
		String code = this.getContextValue("authContext.code");
		...
	}
}
```

è¿™ä¸ªå‰ç¼€é»˜è®¤æ˜¯ä½ çš„ä¸Šä¸‹æ–‡çš„ç±»åçš„é¦–å­—æ¯å°å†™ã€‚ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥æ”¹å˜å®ƒï¼Œå®ƒå—`@ContextBean`è¿™ä¸ªæ³¨è§£çš„å½±å“ï¼š

```java
@ContextBean("authCxt")
public class AuthContext{
    private String code;
    ...
}
```

é‚£ä¹ˆä½ å°±ä¸èƒ½ç”¨`authContext`è¿™ä¸ªå‰ç¼€æ¥å–äº†ï¼Œè€Œæ˜¯é€šè¿‡`authCtx`æ¥å–ï¼š

```java
@Component("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
		String code = this.getContextValue("authCxt.code");
		...
	}
}
```

ä½ é™¤äº†å¯ä»¥ç”¨ç‚¹æ“ä½œç¬¦ï¼Œå¯¹äºå¸¸ç”¨çš„Listï¼ŒMapï¼Œæ•°ç»„å½¢å¼ä¹Ÿæœ‰æ”¯æŒï¼š

```java
@Component("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
	    //å‡è®¾userListæ˜¯ä¸€ä¸ªListå±æ€§ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹æ ‡å»å–
	    String a = this.getContextValue("userList.get(0)");
	    
	    //å‡è®¾dataMapæ˜¯ä¸€ä¸ªMapå±æ€§
		String b = this.getContextValue("dataMap.get('key')");
		
		//å‡è®¾nameArrayæ˜¯ä¸€ä¸ªæ•°ç»„
		String c = this.getContextValue("nameArray[0]");
		
		...
	}
}
```

## ç”¨è¡¨è¾¾å¼è®¾ç½®å‚æ•°

é™¤äº†å¯ä»¥ç”¨è¡¨è¾¾å¼å–å‡ºä¸Šä¸‹æ–‡ä¸­çš„å‚æ•°ï¼Œåœ¨è®¾ç½®å‚æ•°æ—¶ï¼ŒåŒæ ·å¯ä»¥ç”¨è¡¨è¾¾å¼ï¼š

```java
@Component("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
	    String name = this.getContextValue("name");
		this.setContextValue("setDesc", "hello," + name);
	}
}
```

ä»¥ä¸Šä»£ç å°±æ˜¯ä»ä¸Šä¸‹æ–‡ä¸­æ‹¿åˆ°`name`è¿™ä¸ªå€¼ï¼Œå¹¶ä¸”è°ƒç”¨ä¸Šä¸‹æ–‡ä¸­çš„`setDesc`æ–¹æ³•ï¼ŒæŠŠå€¼è®¾ç½®è¿›å»ã€‚

åŒæ ·çš„ï¼Œå¦‚æœæœ‰å¤šä¸ªä¸Šä¸‹æ–‡çš„æ—¶å€™ï¼Œå®Œå…¨ä¸ç”¨å…³å¿ƒ`name`æ˜¯ä»å“ªä¸ªä¸Šä¸‹æ–‡ä¸­æ¥ï¼Œ`setDesc`æ˜¯å“ªä¸ªä¸Šä¸‹æ–‡ä¸­çš„æ–¹æ³•ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ`this.setContextValue`çš„å®šä¹‰æ˜¯ï¼š

```java
public void setContextValue(String methodExpress, Object... values){
...
}
```

æ‰€ä»¥å½“ä½ çš„æ–¹æ³•æœ‰å¤šä¸ªå‚æ•°çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å¯ä»¥æ”¯æŒçš„ã€‚

åŒæ ·çš„ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ç‚¹æ“ä½œç¬¦ç»™æ›´æ·±æ¬¡çš„å¯¹è±¡è¿›è¡Œèµ‹å€¼ï¼Œæ¯”å¦‚ï¼š

```java
@Component("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
	    ...
	    this.setContextValue("member.setDesc", "xxxx");
	    ...
	}
}
```

åŒæ ·çš„ï¼Œä½ æƒ³è°ƒç”¨æŒ‡å®šä¸Šä¸‹æ–‡ä¸­çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸Šä¸‹æ–‡çš„å‰ç¼€åŠ ä»¥æŒ‡å®šï¼š

```java
@Component("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
	    ...
	    this.setContextValue("memberContext.member.setDesc", "xxxx");
	    ...
	}
}
```