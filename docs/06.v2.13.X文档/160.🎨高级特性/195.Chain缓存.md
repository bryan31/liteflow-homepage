---
title: 🌽Chain缓存
date: 2025-07-27 15:58:17
permalink: /pages/d8c641/
---

**版本支持：**<Badge text="v2.13.3+" vertical="middle"/>

## 使用场景
当你的应用需要使用超大量的Chain，而又不想占用过多内存时，可以考虑使用Chain缓存功能。
Chain缓存只保持前N个最活跃的Chain处于编译状态，其余Chain都是未编译状态。

当一个不活跃的Chain被调用的时，会被编译并进入缓存，被缓存淘汰的Chain则重新回到未编译状态。

## 使用方法
在配置文件开启Chain缓存功能，默认是关闭状态。缓存容量上限默值为10000，解析模式需要设为`PARSE_ONE_ON_FIRST_EXEC`。
```properties
liteflow.chain-cache.enabled=true
liteflow.chain-cache.capacity=10000
liteflow.parse-mode=PARSE_ONE_ON_FIRST_EXEC
```

## 注意事项
解析模式必须设为`PARSE_ONE_ON_FIRST_EXEC`，即首次执行时解析Chain，否则Chain缓存功能不会生效。如果在启动或首次执行时就解析了所有的Chain，就无所谓Chain缓存了。

Chain缓存在底层实现上使用了`Caffeine`，其使用`Window TinyLFU(W-TinyLFU)`作为内存淘汰算法。

