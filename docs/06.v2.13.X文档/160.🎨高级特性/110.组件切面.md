---
title: ğŸªç»„ä»¶åˆ‡é¢
date: 2022-07-03 11:07:26
permalink: /pages/v2.13.X/2373f5/
---

LiteFlowæ”¯æŒç»„ä»¶çš„åˆ‡é¢åŠŸèƒ½ï¼Œä½ å¯ä»¥é€šè¿‡2ç§æ–¹å¼è¿›è¡Œ

## å…¨å±€åˆ‡é¢

å…¨å±€åˆ‡é¢æ˜¯é’ˆå¯¹äºæ‰€æœ‰çš„ç»„ä»¶ï¼Œè¿›è¡Œåˆ‡é¢ã€‚ä½ åªéœ€è¦åšå¦‚ä¸‹å®ç°å³å¯ï¼š

```java
@Component
public class CmpAspect implements ICmpAroundAspect {
    @Override
    public void beforeProcess(NodeComponent cmp) {
        YourContextBean context = cmp.getContextBean(YourContextBean.class);
        //before business
    }

    @Override
    public void afterProcess(NodeComponent cmp) {
        YourContextBean context = cmp.getContextBean(YourContextBean.class);
        //after business
    }

    @Override
    public void onSuccess(NodeComponent cmp) {
        //do sth
    }

    @Override
    public void onError(NodeComponent cmp, Exception e) {
        //do sth
    }
}
```

## Aspectçš„åˆ‡é¢

LiteFlowåŒæ—¶ä¹Ÿæ”¯æŒäº†Spring Aspectçš„åˆ‡é¢ï¼Œä½ å¯ä»¥ç”¨@Aspectæ ‡æ³¨å¯¹ä»»æ„åŒ…ï¼Œä»»æ„è§„åˆ™å†…çš„ç»„ä»¶è¿›è¡Œåˆ‡é¢

```java
@Aspect
public class CustomAspect {

    @Pointcut("execution(* com.yomahub.liteflow.test.aop.cmp1.*.process())")
    public void cut() {
    }

    @Around("cut()")
    public Object around(ProceedingJoinPoint jp) throws Throwable {
        //do before business
        Object returnObj = jp.proceed();
        //do after business
        return returnObj;
    }
}
```
