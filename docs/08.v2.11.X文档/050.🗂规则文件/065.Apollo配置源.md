---
title: ğŸ“œApolloé…ç½®æº
date: 2022-12-12 22:42:40
permalink: /pages/bea809/
---

LiteFlowä»2.9.5å¼€å§‹ï¼ŒåŸç”Ÿæ”¯æŒäº†Apolloé…ç½®ä¸­å¿ƒã€‚ä½ å¯ä»¥åœ¨é…ç½®ä¸­å¿ƒé‡Œé…ç½®ä½ çš„é“¾è·¯å’Œè„šæœ¬ã€‚

## ä¾èµ–

å¦‚æœä½¿ç”¨Apolloä½œä¸ºè§„åˆ™é…ç½®æºï¼Œä½ éœ€è¦æ·»åŠ ä»¥ä¸‹é¢å¤–æ’ä»¶ä¾èµ–ï¼š

```xml
<dependency>
    <groupId>com.yomahub</groupId>
    <artifactId>liteflow-rule-apollo</artifactId>
    <version>2.11.0</version>
</dependency>
```

## é…ç½®

ä¾èµ–äº†æ’ä»¶åŒ…ä¹‹åï¼Œä½ æ— éœ€å†é…ç½®`liteflow.ruleSource`è·¯å¾„ã€‚

åªéœ€è¦é…ç½®æ’ä»¶çš„é¢å¤–å‚æ•°å³å¯ï¼š

<code-group>
  <code-block title="Yamlé£æ ¼é…ç½®" active>

```yaml
liteflow:
  rule-source-ext-data-map:
    chainNamespace: chainConfig
    scriptNamespace: scriptConfig
```
  </code-block>
  <code-block title="Propertiesé£æ ¼é…ç½®">

```properties
liteflow.rule-source-ext-data={\
    "chainNamespace":"chainConfig",\
    "scriptNamespace":"scriptConfig",\
}
```
  </code-block>

</code-group>

## é…ç½®è¯´æ˜

| é…ç½®é¡¹          | è¯´æ˜             |
| --------------- | ---------------- |
| chainNamespace  | è§„åˆ™å‘½åç©ºé—´åç§° |
| scriptNamespace | è„šæœ¬å‘½åç©ºé—´åç§° |

## å­˜å‚¨æ•°æ®è¯´æ˜

:::tip

ç”±äºåœ¨Apolloä¸­ï¼Œæ¨èçš„åšæ³•æ˜¯æŠŠè¿æ¥ä¿¡æ¯å’Œç¯å¢ƒä¿¡æ¯æ”¾åˆ°æœåŠ¡å™¨çš„`appdatas`ä¸‹çš„`server.properties` æ–‡ä»¶ä¸­çš„ã€‚æ‰€ä»¥åœ¨LiteFlowçš„é…ç½®æ–‡ä»¶ä¸­æ˜¯ä¸æŒ‡å®šè¿æ¥ä¿¡æ¯çš„ã€‚è¿™ç‚¹è¦æ³¨æ„ä¸‹ã€‚

:::

å¯¹äºè§„åˆ™æ¥è¯´ï¼Œä½ åœ¨Apolloä¸­éœ€è¦ä¸ºè§„åˆ™å•ç‹¬åˆ›å»ºä¸€ä¸ª`Namespace`ï¼Œæ•°æ®ç±»å‹é€‰æ‹©`properties`ï¼Œé‚£ä¹ˆè¿™ä¸ª`Namespace` ä¸‹çš„æ¯ä¸€å¯¹kvéƒ½æ˜¯ä¸€ä¸ªè§„åˆ™ï¼Œå‡è®¾ä½ çš„è§„åˆ™å‘½åç©ºé—´ä¸º:`chainConfig`ï¼Œé‚£ä¹ˆé…ç½®å½¢å¼æ ·ä¾‹å¦‚ä¸‹ï¼š

| Namespaceï¼šchainConfig |                              |
| ---------------------- | ---------------------------- |
| chain1                 | THEN(a, b, c);               |
| chain2                 | IF(x, b).ELIF(y, c).ELSE(d); |



å¯¹äºè„šæœ¬å‘½åç©ºé—´æ¥è¯´ï¼Œkeyæœ‰å›ºå®šæ ¼å¼ï¼š`è„šæœ¬ç»„ä»¶ID:è„šæœ¬ç±»å‹:è„šæœ¬åç§°`ï¼Œvalueä¸ºè„šæœ¬æ•°æ®ï¼Œå‡è®¾ä½ çš„è„šæœ¬å‘½åç©ºé—´ä¸ºï¼š`scriptConfig`ï¼Œé‚£ä¹ˆé…ç½®å½¢å¼æ ·ä¾‹å¦‚ä¸‹ï¼š

| Namespaceï¼šscriptConfig |                                              |
| ----------------------- | -------------------------------------------- |
| s1:script:è„šæœ¬ç»„ä»¶1     | defaultContext.setData("s1","hello")         |
| s2:if_script:è„šæœ¬ç»„ä»¶2  | if(a > 100){return true;}else{return false;} |

## è‡ªåŠ¨åˆ·æ–°

Apolloæ”¯æŒæ¨é€é…ç½®æ•°æ®çš„å˜æ›´ï¼Œå‡¡æ˜¯åœ¨Apolloé‡Œçš„è§„åˆ™å’Œè„šæœ¬å˜åŠ¨ï¼Œä¼šè‡ªåŠ¨æ¨é€åˆ°ä¸šåŠ¡ç³»ç»Ÿï¼Œè¿›è¡Œå®æ—¶çš„å¹³æ»‘çƒ­åˆ·æ–°ï¼Œä½ æ— éœ€åšä»»ä½•äº‹æƒ…ã€‚
