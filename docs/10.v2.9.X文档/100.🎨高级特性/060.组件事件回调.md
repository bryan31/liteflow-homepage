---
title: ğŸ¥ç»„ä»¶äº‹ä»¶å›è°ƒ
date: 2022-07-03 00:41:09
permalink: /pages/v2.9.X/3ee755/
---

LiteFlowæ”¯æŒäº†ç»„ä»¶äº‹ä»¶å›è°ƒã€‚ç›®å‰æ”¯æŒçš„äº‹ä»¶æœ‰2ä¸ªï¼Œç»„ä»¶æˆåŠŸäº‹ä»¶å’Œå¤±è´¥äº‹ä»¶ã€‚

## æˆåŠŸäº‹ä»¶

å¦‚æœä½ åœ¨ç»„ä»¶é‡Œè¦†ç›–äº†`onSuccess`æ–¹æ³•ï¼Œé‚£ä¹ˆç»„ä»¶æˆåŠŸåä¼šå›è°ƒè¿™ä¸ªæ–¹æ³•ã€‚

```java
@LiteflowComponent("a")
public class ACmp extends NodeComponent {

	@Override
	public void process() {
		DefaultContext context = this.getContextBean(DefaultContext.class);
		//do your biz
	}

	@Override
	public void onSuccess() throws Exception {
		DefaultContext context = this.getContextBean(DefaultContext.class);
		//do your biz
	}
}
```

åœ¨æˆåŠŸäº‹ä»¶é‡Œï¼Œä½ å¯ä»¥é€šè¿‡åŒæ ·çš„æ–¹æ³•è·å–åˆ°ä¸Šä¸‹æ–‡ã€‚

## å¤±è´¥äº‹ä»¶

å¦‚æœä½ åœ¨ç»„ä»¶ä¸­è¦†ç›–äº†`onError`æ–¹æ³•ï¼Œé‚£ä¹ˆç»„ä»¶å‘ç”Ÿå¼‚å¸¸åä¼šå›è°ƒè¿™ä¸ªæ–¹æ³•ã€‚

```java
@Component("d")
public class DCmp extends NodeComponent {

	@Override
	public void process() throws Exception{
		//mock throw exception
		throw new NullPointerException();
	}

	@Override
	public void onError() throws Exception {
		DefaultContext context = this.getContextBean(DefaultContext.class);
		//do your biz
	}
}
```

### æ³¨æ„ç‚¹1

`onError`æ–¹æ³•æ‰§è¡Œåï¼Œå› ä¸ºä¸»æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥æ•´ä¸ªæµç¨‹ä¾æ—§æ˜¯å¤±è´¥çŠ¶æ€ã€‚responseå¯¹è±¡é‡Œä¾æ—§æ˜¯ä¸»æ–¹æ³•æŠ›å‡ºçš„é”™ã€‚

### æ³¨æ„ç‚¹2

å¦‚æœ`onError`æ–¹æ³•æœ¬èº«æŠ›é”™ï¼Œé‚£ä¹ˆæœ€ç»ˆæŠ›åˆ°æœ€å¤–é¢çš„é”™ï¼Œæ˜¯ä¸»æ–¹æ³•é‡Œçš„é”™ï¼Œè€Œ`onError`æ–¹æ³•æ‰€äº§ç”Ÿçš„å¼‚å¸¸ä¼šè¢«æ‰“å‡ºå †æ ˆï¼Œä½†ä¸ä¼šæŠ›å‡ºã€‚æ¯”å¦‚ï¼š

```java
@Component("d")
public class DCmp extends NodeComponent {

	@Override
	public void process() throws Exception{
		//mock throw exception
		throw new NullPointerException();
	}

	@Override
	public void onError() throws Exception {
		throw new IllegalAccessException("é”™è¯¯äº‹ä»¶å›è°ƒæœ¬èº«æŠ›å‡ºå¼‚å¸¸");
	}
}
```

é‚£ä¹ˆæœ€ç»ˆresponseé‡Œçš„å¼‚å¸¸ä¼šæ˜¯`NullPointerException`è€Œä¸æ˜¯`IllegalAccessException`ï¼Œä½†æ˜¯`IllegalAccessException`è¿™ä¸ªå¼‚å¸¸ä¼šè¢«æ‰“å‡ºå †æ ˆä¿¡æ¯ã€‚

### æ³¨æ„ç‚¹3

`onError`æ–¹æ³•æ‰§è¡Œåï¼Œ`afterProcess`æ–¹æ³•è¿˜ä¼šæ‰§è¡Œå—ï¼ˆå‡è®¾éƒ½æœ‰å®ç°ï¼‰ï¼Ÿ

ä¼šçš„ï¼Œæ— è®ºæ˜¯å¦æŠ›å‡ºé”™ï¼Œ`afterProcess`æ–¹æ³•éƒ½ä¼šè¢«æ‰§è¡Œã€‚