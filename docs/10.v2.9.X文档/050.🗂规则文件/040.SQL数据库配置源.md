---
title: ğŸ“˜SQLæ•°æ®åº“é…ç½®æº
date: 2022-10-06 23:18:42
permalink: /pages/v2.9.X/236b4f/
---

LiteFlowä»v2.9.0å¼€å§‹ï¼ŒåŸç”Ÿæ”¯æŒäº†æ ‡å‡†å…³ç³»å‹ç»“æ„åŒ–æ•°æ®åº“çš„é…ç½®æºï¼Œåªè¦ä½ çš„æ•°æ®åº“å…¼å®¹æ ‡å‡†SQLè¯­æ³•ï¼Œéƒ½å¯ä»¥æ”¯æŒã€‚

## ä¾èµ–

å¦‚æœä½¿ç”¨æ•°æ®åº“ä½œä¸ºè§„åˆ™é…ç½®æºï¼Œä½ éœ€è¦æ·»åŠ ä»¥ä¸‹é¢å¤–æ’ä»¶ä¾èµ–ï¼š

```xml
<dependency>
    <groupId>com.yomahub</groupId>
    <artifactId>liteflow-rule-sql</artifactId>
    <version>2.9.7</version>
</dependency>
```

## é…ç½®

ä¾èµ–äº†æ’ä»¶åŒ…ä¹‹åï¼Œä½ æ— éœ€å†é…ç½®`liteflow.ruleSource`è·¯å¾„ã€‚

åªéœ€è¦é…ç½®æ’ä»¶çš„é¢å¤–å‚æ•°å³å¯ï¼š

<code-group>
  <code-block title="Yamlé£æ ¼é…ç½®" active>
```yaml
liteflow:
  rule-source-ext-data-map:
    url: jdbc:mysql://localhost:3306/poseidon
    driverClassName: com.mysql.cj.jdbc.Driver
    username: root
    password: 123456
    applicationName: demo
    #ä»¥ä¸‹æ˜¯chainè¡¨çš„é…ç½®ï¼Œè¿™ä¸ªä¸€å®šå¾—æœ‰
    chainTableName: chain
    chainApplicationNameField: application_name
    chainNameField: chain_name
    elDataField: el_data
    #ä»¥ä¸‹æ˜¯scriptè¡¨çš„é…ç½®ï¼Œå¦‚æœä½ æ²¡ä½¿ç”¨åˆ°è„šæœ¬ï¼Œä¸‹é¢å¯ä»¥ä¸é…ç½®
    scriptTableName: script
    scriptApplicationNameField: application_name
    scriptIdField: script_id
    scriptNameField: script_name
    scriptDataField: script_data
    scriptTypeField: script_type
```
  </code-block>
  <code-block title="Propertiesé£æ ¼é…ç½®">

```properties
liteflow.rule-source-ext-data={\
  "url":"jdbc:mysql://localhost:3306/poseidon",\
  "driverClassName":"com.mysql.cj.jdbc.Driver",\
  "username":"root",\
  "password":"123456",\
  "applicationName": "demo",\
  "chainTableName": "chain",\
  "chainApplicationNameField": "application_name",\
  "chainNameField": "chain_name",\
  "elDataField": "el_data",\
  "scriptTableName": "script",\
  "scriptApplicationNameField": "application_name",\
  "scriptIdField": "script_id",\
  "scriptNameField": "script_name",\
  "scriptDataField": "script_data",\
  "scriptTypeField": "script_type"
  }
```
  </code-block>
</code-group>

## é…ç½®è¯´æ˜

LiteFlowå¹¶ä¸çº¦æŸä½ çš„è¡¨åå’Œè¡¨ç»“æ„ï¼Œä½ åªéœ€è¦æŠŠè¡¨åå’Œç›¸å…³çš„å­—æ®µåé…ç½®åœ¨å‚æ•°é‡Œå³å¯ã€‚

å¯¹äºé…ç½®é¡¹è¯´æ˜å¦‚ä¸‹ï¼š

| é…ç½®é¡¹                     | è¯´æ˜                                     |
| -------------------------- |----------------------------------------|
| url                        | jdbcçš„è¿æ¥url                             |
| driverClassName            | é©±åŠ¨å™¨ç±»å                                  |
| username                   | æ•°æ®åº“ç”¨æˆ·å                                 |
| password                   | æ•°æ®åº“å¯†ç                                   |
| applicationName            | ä½ çš„åº”ç”¨åç§°                                 |
| chainTableName             | ç¼–æ’è§„åˆ™è¡¨çš„è¡¨å                               |
| chainApplicationNameField  | ç¼–æ’è§„åˆ™è¡¨ä¸­åº”ç”¨åç§°å­˜å‚¨å­—æ®µå                        |
| chainNameField             | è§„åˆ™åç§°å­˜å‚¨çš„å­—æ®µå                             |
| elDataField                | ELè¡¨è¾¾å¼çš„å­—æ®µ(åªå­˜EL)                         |
| scriptTableName            | ä½ çš„è„šæœ¬å­˜å‚¨è¡¨çš„è¡¨å                             |
| scriptApplicationNameField | è„šæœ¬è¡¨ä¸­åº”ç”¨åç§°å­˜å‚¨å­—æ®µå                          |
| scriptIdField              | è„šæœ¬ç»„ä»¶çš„Idçš„å­—æ®µå                            |
| scriptNameField            | è„šæœ¬ç»„ä»¶åç§°çš„å­—æ®µå                             |
| scriptDataField            | è„šæœ¬æ•°æ®çš„å­—æ®µå                               |
| scriptTypeField            | è„šæœ¬ç±»å‹çš„å­—æ®µå(ç±»å‹å‚ç…§[å®šä¹‰è„šæœ¬ç»„ä»¶](/pages/v2.9.X/81d53c/)) |

<br>

åœ¨æ•°æ®åº“ä¸­ï¼Œä½ è‡³å°‘éœ€è¦ä¸€å¼ è¡¨æ¥å­˜å‚¨ç¼–æ’è§„åˆ™ï¼Œè¿™æ˜¯å¿…é¡»çš„ã€‚

å¦‚æœä½ ä½¿ç”¨åˆ°äº†è„šæœ¬ï¼Œé‚£ä¹ˆéœ€è¦ç¬¬äºŒå¼ è¡¨æ¥å­˜å‚¨è„šæœ¬ã€‚

åœ¨è§„åˆ™è¡¨ä¸­ï¼Œä¸€è¡Œæ•°æ®å°±æ˜¯ä¸€ä¸ªè§„åˆ™ã€‚åœ¨è„šæœ¬è¡¨ä¸­ï¼Œä¸€è¡Œæ•°æ®å°±æ˜¯ä¸€ä¸ªè„šæœ¬ç»„ä»¶ã€‚

<br>

ä¸¾ä¾‹ï¼š

è§„åˆ™è¡¨ï¼šliteflow_chain

| id   | application_name | chain_name | chain_desc | el_data               | create_time         |
| ---- | ---------------- | ---------- | ---------- | --------------------- | ------------------- |
| 1    | demo             | chain1     | æµ‹è¯•æµç¨‹1  | THEN(a, b, c, s1,s2); | 2022-09-19 19:31:00 |

è„šæœ¬è¡¨ï¼šliteflow_script

| id   | application_name | script_id | script_name | script_data                                                  | script_type | create_time         |
| ---- | ---------------- | --------- | ----------- | ------------------------------------------------------------ | ----------- | ------------------- |
| 1    | demo             | s1        | è„šæœ¬s1      | import cn.hutool.core.date.DateUtil<br>def date = DateUtil.parse("2022-10-17 13:31:43")<br>println(date) defaultContext.setData("demoDate", date)<br>class Student {<br/>   int studentID<br/>   String studentName<br/>}<br/>Student student = new Student() student.studentID = 100301 student.studentName = "å¼ ä¸‰" defaultContext.setData("student",student)  def a=3<br/>def b=2<br/>defaultContext.setData("s1",a*b) | script      | 2022-09-19 19:31:00 |
| 2    | demo             | s2        | è„šæœ¬s2      | defaultContext.setData("s2","hello")                         | script      | 2022-09-19 19:31:00 |



## è‡ªåŠ¨åˆ·æ–°

ç”±äºç»“æ„åŒ–æ•°æ®åº“å¹¶ä¸æä¾›ç›‘å¬æœºåˆ¶ï¼Œæ‰€ä»¥å½“ä½ çš„è§„åˆ™åœ¨æ•°æ®åº“ä¸­å‘ç”Ÿå˜åŒ–ï¼ŒLiteFlowæ˜¯æ„ŸçŸ¥ä¸åˆ°å˜åŒ–çš„ã€‚ä¸ä¼šè‡ªåŠ¨åˆ·æ–°è§„åˆ™ã€‚

ä½ éœ€è¦æ‰‹åŠ¨è°ƒç”¨LiteFlowæä¾›çš„ç›¸å…³APIæ¥å®Œæˆè§„åˆ™åˆ·æ–°ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªåˆ·æ–°åšæˆé¡µé¢ä¸Šçš„ä¸€ä¸ªæŒ‰é’®æˆ–è€…ä¸€ä¸ªhttpé“¾æ¥æ¥è¿›è¡Œæ“ä½œã€‚

å…·ä½“å¦‚ä½•è°ƒç”¨APIè¿›è¡Œè§„åˆ™åˆ·æ–°è¯·å‚ç…§[å¹³æ»‘çƒ­åˆ·æ–°](/pages/v2.9.X/204d71/)ã€‚

## å°ä¾‹å­
ä¸ºäº†è®©å¤§å®¶èƒ½ç®€å•ä¸Šæ‰‹SQLè§„åˆ™æ–‡ä»¶çš„é…ç½®å’Œè¿è¡Œï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå°demoï¼Œå¤§å®¶å¯ä»¥æ‹‰åˆ°æœ¬åœ°æ¥è¿è¡Œï¼Œéœ€è¦ä½ æ›¿æ¢æ•°æ®åº“çš„é…ç½®ä¿¡æ¯ã€‚

è¿è¡Œé¡¹ç›®å‰ï¼Œå…ˆè¯»é¡¹ç›®é‡Œçš„`readme.txt`æ–‡ä»¶ã€‚

> https://github.com/bryan31/liteflow-ext-rule-demo