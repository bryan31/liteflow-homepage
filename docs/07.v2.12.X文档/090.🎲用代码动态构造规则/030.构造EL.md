---
title: ğŸŒ°æ„é€ EL
date: 2023-10-11 21:54:09
permalink: /pages/a3cb4b/
---

## ä¾èµ–

ä»2.11.1ç‰ˆæœ¬å¼€å§‹ï¼Œä½ å¯ä»¥åœ¨ä»£ç ä¸­åŠ¨æ€ç»„è£…ELè¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬åˆ›å»ºã€ä¿®æ”¹ã€è¾“å‡ºELè¡¨è¾¾å¼ã€‚

å¦‚æœéœ€è¦åœ¨ä»£ç ä¸­åŠ¨æ€æ„å»ºELè¡¨è¾¾å¼ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹é¢å¤–ä¾èµ–ï¼š
```xml
<dependency>
    <groupId>com.yomahub</groupId>
    <artifactId>liteflow-el-builder</artifactId>
    <version>2.12.4.1</version>
</dependency>
```

## æ„å»ºä¸€ä¸ªELè¡¨è¾¾å¼

ä½ å¯ä»¥é€šè¿‡å·¥å‚ç±»ELBusåˆ›å»ºä»»ä½•ä¸€ä¸ªELè¡¨è¾¾å¼ã€‚æ¯”å¦‚å¯¹äºè¿™æ ·ä¸€ä¸ªELè¡¨è¾¾å¼ï¼š


:::tip å›¾ç¤º

<img :src="$withBase('/img/flow_example/e3.svg')" style="zoom: 80%" class="no-zoom">

:::


å¯ä»¥è°ƒç”¨å¦‚ä¸‹æ–¹æ³•ç»„è£…è¯¥è¡¨è¾¾å¼ï¼š

```Java
// ç»„è£…ELè¡¨è¾¾å¼
ThenELWrapper el = ELBus.then("a",
		ELBus.when("b").when(ELBus.then("c", "d")),
		"e");
```

å¯ä»¥è°ƒç”¨`toEL()`æ–¹æ³•è¾“å‡ºELè¡¨è¾¾å¼ï¼š

```Java
THEN(node("a"),WHEN(node("b"),THEN(node("c"),node("d"))),node("e"))
```

:::tip

ä¸ºäº†é¿å…å¯èƒ½çš„å†²çªï¼Œnode("")å°†ç»„ä»¶åè¿›è¡Œäº†åŒ…è£…ï¼Œä»¥ç¡®ä¿Nodeçš„åç§°ä¸LiteFlowç»„ä»¶åè§„èŒƒä¸å‘ç”Ÿå†²çªã€‚æ›´è¯¦ç»†çš„å†…å®¹è¯·æŸ¥çœ‹[ç»„ä»¶ååŒ…è£…](/pages/2df3d9/)ã€‚

:::

é™¤äº†æ„å»ºè¡¨è¾¾å¼ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­è°ƒç”¨è¡¨è¾¾å¼çš„å…³é”®å­—ï¼Œæ¯”å¦‚ä¸ºé€‰æ‹©ç»„ä»¶çš„å­ç»„ä»¶è®¾ç½®idã€tagï¼Œè®¾ç½®å¹¶è¡Œç»„ä»¶çš„anyå…³é”®å­—ç­‰ç­‰ã€‚å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š

```xml
<!-- ç›®æ ‡ELè¡¨è¾¾å¼ -->
<chain name="chain1">
whenData = '{"name":"zhangsan","age":18}';

WHEN(
	node("a"),
	WHEN(
		node("b").data(whenData),
		node("c")
	).id("this is a id"),
	node("d")
).any(true).tag("this is a tag")
</chain>
```

å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•ç»„è£…å‡ºè¯¥ELè¡¨è¾¾å¼ï¼Œè°ƒç”¨å¯¹åº”çš„å…³é”®å­—ï¼Œå¹¶è¾“å‡ºå¯¹åº”çš„è¡¨è¾¾å¼ã€‚

```Java
// ELè¡¨è¾¾å¼ç»„è£…
WhenELWrapper el = ELBus.when("a",
		ELBus.when(ELBus.node("b").data("whenData", "{\"name\":\"zhangsan\",\"age\":18}"))
		     .when("c")
			 .id("this is a id"),
		"d").tag("this is a tag").any(true);
```

è¯¥ELè¡¨è¾¾å¼è¾“å‡ºå¦‚ä¸‹ï¼š

```Java
whenData = '{"name":"zhangsan","age":18}';
WHEN(node("a"),WHEN(node("b").data(whenData),node("c")).id("this is a id"),node("d")).any(true).tag("this is a tag")
```

## æ ¼å¼åŒ–è¾“å‡ºELè¡¨è¾¾å¼

å®¹æ˜“èƒ½å‘ç°`toEL()`æ–¹æ³•è¾“å‡ºçš„ELè¡¨è¾¾å¼æ˜¯ä¸€è¡Œå­—ç¬¦ä¸²ï¼Œä¸æ–¹ä¾¿æŸ¥çœ‹ä»¥åŠæ ¡éªŒELè¡¨è¾¾å¼æ˜¯å¦æ­£ç¡®ã€‚å¯ä»¥ä½¿ç”¨ `toEL(true)` æ–¹æ³•ä»¥æ ‘å½¢ç»“æ„è¾“å‡ºELè¡¨è¾¾å¼ã€‚å¯¹äºä¸Šä¸€ä¸ªä¾‹å­ä¸­çš„ELè¡¨è¾¾å¼ï¼Œè°ƒç”¨`el.toEL(true)`æ–¹æ³•ï¼Œå¾—åˆ°æ ‘å‹ç»“æ„è¡¨è¾¾å¼è¾“å‡ºå¦‚ä¸‹ï¼š

```Java
whenData = '{"name":"zhangsan","age":18}';
WHEN(
	node("a"),
	WHEN(
		node("b").data(whenData),
		node("c")
	).id("this is a id"),
	node("d")
).any(true).tag("this is a tag")
```

## ç›®å‰æ”¯æŒçš„è¡¨è¾¾å¼å’Œå…³é”®å­—

ç›®å‰æ”¯æŒåˆ°2.11.1ç‰ˆæœ¬çš„æ‰€æœ‰ELè¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬å…¶ä¸­çš„å…³é”®å­—å’Œé«˜çº§ç‰¹æ€§ã€‚å½“å‰æ”¯æŒçš„è¯¦ç»†å†…å®¹å¦‚ä¸‹è¡¨ï¼š

| ELè¡¨è¾¾å¼       | åˆ›å»ºæ–¹æ³•                                                | æ”¯æŒè°ƒç”¨æ–¹æ³•                                                 | æ”¯æŒå…³é”®å­—                                                   |
| -------------- | ------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| ä¸²è¡Œç¼–æ’       | ELBus.then                                              | then(Object ... objects)                                     | pre<br />finally<br />tag<br />id<br />maxWaitSeconds |
| å¹¶è¡Œç¼–æ’       | ELBus.when                                              | when(Object ... objects)                                     | any<br />ignoreError<br />customThreadExecutor<br />must<br />tag<br />id<br />maxWaitSeconds |
| é€‰æ‹©ç¼–æ’       | ELBus.switch                                            | to(Object... objects)<br />defaultOpt(Object object)         | tag<br />id<br />maxWaitSeconds                    |
| æ¡ä»¶ç¼–æ’       | ELBus.ifOpt                                             | elseOpt(Object falseObject)<br />elIfOpt(Object ifObject, Object trueObject) | tag<br />id<br />maxWaitSeconds                    |
| å¾ªç¯ç¼–æ’       | ELBus.forOpt<br />ELBus.whileOpt<br />ELBus.iteratorOpt | doOpt(Object object)<br />breakOpt(Object object) (ITERATORè¿­ä»£å™¨å¾ªç¯è¡¨è¾¾å¼ä¸æ”¯æŒ) | parallel<br />tag<br />id<br />maxWaitSeconds      |
| æ•è·å¼‚å¸¸è¡¨è¾¾å¼ | ELBus.catchException                                    | doOpt(Object object)                                         | tag<br />id<br />maxWaitSeconds                    |
| ä¸è¡¨è¾¾å¼       | ELBus.and                                               | and(Object ... object)                                       | tag<br />id<br />maxWaitSeconds                    |
| æˆ–è¡¨è¾¾å¼       | ELBus.or                                                | or(Object ... object)                                        | tag<br />id<br />maxWaitSeconds                    |
| éè¡¨è¾¾å¼       | ELBus.not                                               |                                                              | tag<br />id<br />maxWaitSeconds                    |
| å•èŠ‚ç‚¹è¡¨è¾¾å¼   | ELBus.node                                              |                                                              | tag<br />data<br />maxWaitSeconds                            |
| å‰ç½®ç»„ä»¶       | é€šè¿‡thenç»„ä»¶çš„preå…³é”®å­—åˆ›å»º                             |                                                              | tag<br />id<br />maxWaitSeconds                    |
| åç½®ç»„ä»¶       | é€šè¿‡thenç»„ä»¶çš„finallyå…³é”®å­—åˆ›å»º                         |                                                              | tag<br />id                                       |

## ELè¡¨è¾¾å¼å‚æ•°æ ¡éªŒ

ç»„è£…è¡¨è¾¾å¼æ—¶ä¼šå¯¹è¡¨è¾¾å¼çš„å‚æ•°ç±»å‹è¿›è¡Œæ ¡éªŒã€‚åŒ…æ‹¬æ˜¯å¦ä¸ºå•èŠ‚ç‚¹ç»„ä»¶ã€æ˜¯å¦å…è®¸ä¸ºä¸æˆ–éè¡¨è¾¾å¼ç­‰ã€‚æ¯”å¦‚ï¼ŒWHILEè¡¨è¾¾å¼`WHILE(w).DO(THEN(a, b));` ä¸­ï¼Œwéœ€è¦æ˜¯è¿”å›å¸ƒå°”å€¼çš„èŠ‚ç‚¹æˆ–ä¸æˆ–éè¡¨è¾¾å¼ã€‚

æ›´å¤šæµ‹è¯•æ ·ä¾‹è¯·åœ¨ `liteflow-testcase-el/liteflow-testcase-el-builder` æ¨¡å—ä¸­æŸ¥çœ‹ã€‚



## ä¸åŒ…è£…çš„Node<Badge text="v2.12.3+"/>

å¦‚æœç”¨`ELBus.node("a")`è¿™ç§ï¼Œæœ€åtoEL()å‡ºæ¥çš„æ˜¯`node("a")`ï¼Œè¿™æ˜¯ç»è¿‡åŒ…è£…è¿‡çš„ç»„ä»¶ï¼Œè¿™ç§åŒ…è£…è¿‡çš„ç»„ä»¶åœ¨å¯åŠ¨æ—¶ä¸ä¼šæ£€æŸ¥aå­˜ä¸å­˜åœ¨ï¼Œè€Œåœ¨æ‰§è¡Œæ—¶å½“aä¸å­˜åœ¨æ—¶ï¼Œä¼šè°ƒç”¨açš„é™çº§ç»„ä»¶ã€‚

å…³äºé™çº§ç»„ä»¶è¯·å‚ç…§[ç»„ä»¶é™çº§](/pages/79289a/)è¿™ä¸€ç« ã€‚

å¦‚æœä¸å¸Œæœ›å‡ºæ¥çš„æ˜¯åŒ…è£…è¿‡çš„ï¼Œå¯ä»¥ç”¨`ELBus.commonNode("a")`ï¼Œé‚£æœ€åtoEL()å‡ºæ¥å°±æ˜¯`a`ã€‚è¿™ç§åŒæ ·é€‚ç”¨äºæ”¾ä¸€ä¸ªchainIdã€‚

