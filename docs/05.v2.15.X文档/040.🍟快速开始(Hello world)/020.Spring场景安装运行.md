---
title: ğŸŒ±Springåœºæ™¯å®‰è£…è¿è¡Œ
date: 2025-08-28 11:28:31
permalink: /pages/7b1eeb/
---

## ä¾èµ–
é’ˆå¯¹äºä½¿ç”¨äº†Springä½†æ²¡æœ‰ä½¿ç”¨SpringBootçš„é¡¹ç›®

```xml
<dependency>
	<groupId>com.yomahub</groupId>
    <artifactId>liteflow-spring</artifactId>
	<version>2.13.2</version>
</dependency>
```
ä¸ºç¨³å®šç‰ˆæœ¬ï¼Œç›®å‰jaråŒ…å·²ä¸Šä¼ ä¸­å¤®ä»“åº“ï¼Œå¯ä»¥ç›´æ¥ä¾èµ–åˆ°

## å®šä¹‰ä½ çš„ç»„ä»¶
ä½ éœ€è¦å®šä¹‰å¹¶å®ç°ä¸€äº›ç»„ä»¶ï¼Œç¡®ä¿Springä¼šæ‰«æåˆ°è¿™äº›ç»„ä»¶å¹¶æ³¨å†Œè¿›ä¸Šä¸‹æ–‡
```java
@LiteflowComponent("a")
public class ACmp extends NodeComponent {

    @Override
    public void process() {
        //do your business
    }
}
```

ä»¥æ­¤ç±»æ¨å†åˆ†åˆ«å®šä¹‰b,cç»„ä»¶:

```java
@LiteflowComponent("b")
public class BCmp extends NodeComponent {

	@Override
	public void process() {
		//do your business
	}
}
```

```java
@LiteflowComponent("c")
public class CCmp extends NodeComponent {

	@Override
	public void process() {
		//do your business
	}
}
```

## Spring xmlä¸­çš„é…ç½®
```xml
<context:component-scan base-package="com.yomahub.flowtest.components" />

<bean id="springAware" class="com.yomahub.liteflow.spi.spring.SpringAware"/>

<bean class="com.yomahub.liteflow.spring.ComponentScanner"/>

<bean id="liteflowConfig" class="com.yomahub.liteflow.property.LiteflowConfig">
    <property name="ruleSource" value="config/flow.xml"/>
</bean>

<bean id="flowExecutor" class="com.yomahub.liteflow.core.FlowExecutor" depends-on="springAware">
    <property name="liteflowConfig" ref="liteflowConfig"/>
</bean>

<!-- å¦‚æœä¸Šè¿°enableLogä¸ºfalseï¼Œä¸‹é¢è¿™æ®µä¹Ÿå¯ä»¥çœç•¥ -->
<bean class="com.yomahub.liteflow.monitor.MonitorBus">
    <constructor-arg ref="liteflowConfig" />
</bean>
```

æ›´å¤šé…ç½®é¡¹è¯·å‚è€ƒ[é…ç½®é¡¹](/pages/33833a/)ç« èŠ‚ã€‚

## è§„åˆ™æ–‡ä»¶çš„å®šä¹‰
åŒæ—¶ï¼Œä½ å¾—åœ¨resourcesçš„`config/flow.xml`ä¸­å¦‚ä¸‹é…ç½®ï¼š
```xml
<?xml version="1.0" encoding="UTF-8"?>
<flow>
    <chain name="chain1">
        THEN(a, b, c)
    </chain>
</flow>
```

Springåœ¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨è£…è½½è§„åˆ™æ–‡ä»¶ã€‚

## æ‰§è¡Œ
å’ŒSpringBootçš„æ‰§è¡Œæ–¹å¼ä¸€æ ·ï¼Œæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ä»»ä½•å—Springæ‰˜ç®¡çš„ç±»é‡Œæ³¨å…¥`FlowExecutor`è¿›è¡Œæ‰§è¡Œï¼š

```java
@Component
public class YourClass{
    
    @Resource
    private FlowExecutor flowExecutor;
    
    @Test
    public void testConfig(){
        LiteflowResponse response = flowExecutor.execute2Resp("chain1", "arg", DefaultContext.class);
    }
}
```

::: tip
è¿™ä¸ª`DefaultContext`æ˜¯é»˜è®¤çš„ä¸Šä¸‹æ–‡ï¼Œç”¨æˆ·å¯ä»¥ç”¨æœ€è‡ªå·±çš„ä»»æ„Beanå½“åšä¸Šä¸‹æ–‡ä¼ å…¥ï¼Œå¦‚æœéœ€è¦ä¼ å…¥è‡ªå·±çš„ä¸Šä¸‹æ–‡ï¼Œåˆ™éœ€è¦ä¼ ç”¨æˆ·Beançš„Classå±æ€§ï¼Œå…·ä½“è¯·çœ‹[æ•°æ®ä¸Šä¸‹æ–‡](/pages/74b4bf/)è¿™ä¸€ç« èŠ‚ã€‚
:::