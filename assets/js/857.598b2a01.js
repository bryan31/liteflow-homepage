(window.webpackJsonp=window.webpackJsonp||[]).push([[857],{1318:function(t,a,s){"use strict";s.r(a);var n=s(8),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("其实从上一个版本开始，LiteFlow已经对脚本进行了大幅度的加强。目前脚本可以基本上可以代替java的逻辑进行书写。")]),t._v(" "),a("p",[t._v("你甚至可以在脚本中定义定义类，定义方法。官方推荐的脚本语言首选是"),a("code",[t._v("Groovy")]),t._v("。")]),t._v(" "),a("p",[t._v("在这次的2.9.1版本中，LiteFlow更是推出了"),a("code",[t._v("Javascript")]),t._v("脚本语言的支持。")]),t._v(" "),a("h2",{attrs:{id:"javascript脚本语言的支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript脚本语言的支持"}},[t._v("#")]),t._v(" Javascript脚本语言的支持")]),t._v(" "),a("p",[t._v("你可以如下定义你的脚本节点，使用"),a("code",[t._v("Javascript")]),t._v("脚本语言")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("flow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("nodes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("node")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("s1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("普通脚本1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("javascript"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token cdata"}},[t._v('<![CDATA[\n                var a=3;\n                var b=2;\n                var c=1;\n                var d=5;\n\n                function addByArray(values) {\n                    var sum = 0;\n                    for (var i = 0; i < values.length; i++) {\n                        sum += values[i];\n                    }\n                    return sum;\n                }\n\n                var result = addByArray([a,b,c,d]);\n\n                defaultContext.setData("s1",parseInt(result));\n            ]]>')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("node")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("nodes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("flow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("加上"),a("code",[t._v("language")]),t._v("信息是为了方便"),a("code",[t._v("LiteFlowX")]),t._v("做高亮提示。")]),t._v(" "),a("p",[t._v("是的，这次同步发行的"),a("code",[t._v("LiteFlowX")]),t._v("新版本对"),a("code",[t._v("Groovy")]),t._v("和"),a("code",[t._v("Javascript")]),t._v("语法也作了高亮提示支持。让你在写脚本的时候更加得心应手。")]),t._v(" "),a("p",[t._v("并且，在编译脚本的时候，也新增了脚本出错的提示，会在命令行里用箭头标出脚本出错的位置。")]),t._v(" "),a("p",[t._v("详细文档请参考"),a("RouterLink",{attrs:{to:"/pages/81d53c/"}},[t._v("定义脚本组件")]),t._v("这一章。")],1),t._v(" "),a("h2",{attrs:{id:"rule-source-ext-data支持在yml文件中的原生配置形式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rule-source-ext-data支持在yml文件中的原生配置形式"}},[t._v("#")]),t._v(" rule-source-ext-data支持在yml文件中的原生配置形式")]),t._v(" "),a("p",[t._v("之前社区很多小伙伴在对springboot的yml形式的存储配置有点疑惑，怎么配置感觉都不对。")]),t._v(" "),a("p",[t._v("其实之前的形式，在yml文件里有要配置成整个json为字符串的形式，这样似乎丧失了yml格式的便捷性。为此，LiteFlow 2.9.1版本支持了yml形式的原生外置存储的配置格式，你可以像如下进行配置：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("liteflow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rule-source-ext-data-map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("3306/poseidon\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driverClassName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.mysql.cj.jdbc.Driver\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" root\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tableName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" chain\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("elDataField")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" el_data\n")])])]),a("p",[t._v("详细文档请参考："),a("RouterLink",{attrs:{to:"/pages/ffc345/"}},[t._v("ZK规则文件配置源")]),t._v("，"),a("RouterLink",{attrs:{to:"/pages/236b4f/"}},[t._v("SQL数据库配置源")]),t._v("，"),a("RouterLink",{attrs:{to:"/pages/09b776/"}},[t._v("Nacos配置源")]),t._v("，"),a("RouterLink",{attrs:{to:"/pages/4bfac2/"}},[t._v("Etcd配置源")]),t._v("。")],1),t._v(" "),a("h2",{attrs:{id:"外置存储插件的报错无法抛出来"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外置存储插件的报错无法抛出来"}},[t._v("#")]),t._v(" 外置存储插件的报错无法抛出来")]),t._v(" "),a("p",[t._v("之前提供的zk，sqldb，etcd，nacos之类的插件如果初始化或者执行的过程中发生异常，LiteFlow会吃掉其异常。这使得排错过程中大家会有点迷茫。")]),t._v(" "),a("p",[t._v("这次LiteFlow 2.9.1版本中修复了此问题。规则存储插件的报错更加清晰。")]),t._v(" "),a("h2",{attrs:{id:"提升框架的安全性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提升框架的安全性"}},[t._v("#")]),t._v(" 提升框架的安全性")]),t._v(" "),a("p",[t._v("LiteFlow 2.9.1通过了"),a("a",{attrs:{href:"https://www.murphysec.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("墨菲安全"),a("OutboundLink")],1),t._v("的检测，为0风险框架！更新了可能存在安全漏洞的第三方依赖包。您可放心的使用。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.murphysec.com/dr/pSdSchoCUEdpkadxPy",alt:"OSCS Status"}},[a("img",{staticClass:"no-zoom",attrs:{src:"https://www.oscs1024.com/platform/badge/dromara/liteFlow.git.svg?size=large"}})])])])}),[],!1,null,null,null);a.default=e.exports}}]);