(window.webpackJsonp=window.webpackJsonp||[]).push([[289],{751:function(t,s,e){"use strict";e.r(s);var a=e(8),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("普通组件节点需要继承"),s("code",[t._v("NodeComponent")]),t._v("，可用于"),s("code",[t._v("THEN")]),t._v("和"),s("code",[t._v("WHEN")]),t._v("关键字中。")]),t._v(" "),s("p",[t._v("需要实现"),s("code",[t._v("process")]),t._v("方法")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@LiteflowComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ACmp")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NodeComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ACmp executed!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[s("code",[t._v("@LiteflowComponent")]),t._v("继承自"),s("code",[t._v("@Component")]),t._v("，如果你在spring体系的环境里，组件里可以任意注入spring的bean进行使用。")]),t._v(" "),s("p",[s("code",[t._v("@LiteflowComponent")]),t._v("的参数a，就是你在写EL规则时需要用到组件ID。")])]),t._v(" "),s("h2",{attrs:{id:"可以覆盖的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可以覆盖的方法"}},[t._v("#")]),t._v(" 可以覆盖的方法")]),t._v(" "),s("p",[t._v("对于组件来说，可以覆盖超类中的以下方法。")]),t._v(" "),s("h3",{attrs:{id:"isaccess"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#isaccess"}},[t._v("#")]),t._v(" isAccess")]),t._v(" "),s("p",[t._v("推荐实现"),s("code",[t._v("isAccess")]),t._v("方法，表示是否进入该节点，可以用于业务参数的预先判断")]),t._v(" "),s("h3",{attrs:{id:"iscontinueonerror"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iscontinueonerror"}},[t._v("#")]),t._v(" isContinueOnError")]),t._v(" "),s("p",[t._v("表示出错是否继续往下执行下一个组件，默认为false")]),t._v(" "),s("h3",{attrs:{id:"isend"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#isend"}},[t._v("#")]),t._v(" isEnd")]),t._v(" "),s("p",[t._v("如果覆盖后，返回true，则表示在这个组件执行完之后立马终止整个流程。对于这种方式，由于是用户主动结束的流程，属于正常结束，所以最终的isSuccess是为true的。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("需要注意的是，如果"),s("code",[t._v("isContinueOnError")]),t._v("为true的情况下，调用了"),s("code",[t._v("this.setIsEnd(true)")]),t._v("，那么依旧会终止。response里的"),s("code",[t._v("isSuccess")]),t._v("还是true。")])]),t._v(" "),s("h3",{attrs:{id:"beforeprocess和afterprocess"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#beforeprocess和afterprocess"}},[t._v("#")]),t._v(" beforeProcess和afterProcess")]),t._v(" "),s("p",[t._v("流程的前置和后置处理器，其中前置处理器，在"),s("code",[t._v("isAccess")]),t._v(" 之后执行。")]),t._v(" "),s("p",[t._v("用于执行一些前置和后置处理，但是一般这个用不上。如果是统一做组件前置和后置，推荐用切面去完成。关于切面可以参考"),s("RouterLink",{attrs:{to:"/pages/v2.11.X/2373f5/"}},[t._v("组件切面")]),t._v(";")],1),t._v(" "),s("h3",{attrs:{id:"onsuccess和onerror"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onsuccess和onerror"}},[t._v("#")]),t._v(" onSuccess和onError")]),t._v(" "),s("p",[t._v("流程的成功失败事件回调，详情请参考"),s("RouterLink",{attrs:{to:"/pages/v2.11.X/3ee755/"}},[t._v("组件事件回调")]),t._v("。")],1),t._v(" "),s("h3",{attrs:{id:"rollback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rollback"}},[t._v("#")]),t._v(" rollback")]),t._v(" "),s("p",[t._v("流程失败后的回滚方法，详情请参考"),s("RouterLink",{attrs:{to:"/pages/v2.11.X/y172l7/"}},[t._v("组件回滚")]),t._v("。")],1),t._v(" "),s("h2",{attrs:{id:"this关键字可以调用的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this关键字可以调用的方法"}},[t._v("#")]),t._v(" This关键字可以调用的方法")]),t._v(" "),s("h3",{attrs:{id:"获取上下文"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取上下文"}},[t._v("#")]),t._v(" 获取上下文")]),t._v(" "),s("p",[t._v("在组件节点里，随时可以通过方法"),s("code",[t._v("this.getContextBean(clazz)")]),t._v("获取当前你自己定义的上下文，从而可以获取任何数据。")]),t._v(" "),s("h3",{attrs:{id:"getnodeid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getnodeid"}},[t._v("#")]),t._v(" getNodeId")]),t._v(" "),s("p",[t._v("获取组件ID。")]),t._v(" "),s("h3",{attrs:{id:"getname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getname"}},[t._v("#")]),t._v(" getName")]),t._v(" "),s("p",[t._v("获取组件别名。")]),t._v(" "),s("h3",{attrs:{id:"getchainname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getchainname"}},[t._v("#")]),t._v(" getChainName")]),t._v(" "),s("p",[t._v("获取当前执行的流程名称。")]),t._v(" "),s("h3",{attrs:{id:"getrequestdata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getrequestdata"}},[t._v("#")]),t._v(" getRequestData")]),t._v(" "),s("p",[t._v("获取流程的初始参数。")]),t._v(" "),s("h3",{attrs:{id:"setisend"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setisend"}},[t._v("#")]),t._v(" setIsEnd")]),t._v(" "),s("p",[t._v("表示是否立即结束整个流程 ，用法为"),s("code",[t._v("this.setIsEnd(true)")]),t._v("。对于这种方式，由于是用户主动结束的流程，属于正常结束，所以最终的isSuccess是为true的。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("需要注意的是，如果"),s("code",[t._v("isContinueOnError")]),t._v("为true的情况下，调用了"),s("code",[t._v("this.setIsEnd(true)")]),t._v("，那么依旧会终止。response里的"),s("code",[t._v("isSuccess")]),t._v("还是true。")])]),t._v(" "),s("h3",{attrs:{id:"gettag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gettag"}},[t._v("#")]),t._v(" getTag")]),t._v(" "),s("p",[t._v("获取这个组件的标签信息，关于标签的定义和使用，请参照"),s("RouterLink",{attrs:{to:"/pages/v2.11.X/0f788f/"}},[t._v("组件标签")]),t._v("。")],1),t._v(" "),s("h3",{attrs:{id:"invoke和invoke2response"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#invoke和invoke2response"}},[t._v("#")]),t._v(" invoke和invoke2Response")]),t._v(" "),s("p",[t._v("调用隐式流程，关于隐式流程的说明和用法，请参考"),s("RouterLink",{attrs:{to:"/pages/v2.11.X/80e873/"}},[t._v("隐式子流程")]),t._v("。")],1),t._v(" "),s("h2",{attrs:{id:"liteflowcomponent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#liteflowcomponent"}},[t._v("#")]),t._v(" @LiteflowComponent")]),t._v(" "),s("p",[t._v("从v2.6.0开始，新增了"),s("code",[t._v("@LiteflowComponent")]),t._v("标签，它是继承于Spring的"),s("code",[t._v("@Component")]),t._v("标签的，所以从作用上来说，和"),s("code",[t._v("@Component")]),t._v("标签并没有什么区别，但是"),s("code",[t._v("@LiteflowComponent")]),t._v("新增加了"),s("code",[t._v("name")]),t._v("属性，用于给组件起别名，在打印调用链的时候会体现。具体请查看"),s("RouterLink",{attrs:{to:"/pages/v2.11.X/4d614c/"}},[t._v("打印信息详解")]),t._v("章节，新版本开始，推荐大家使用"),s("code",[t._v("@LiteflowComponent")]),t._v("，当然"),s("code",[t._v("@Component")]),t._v("也同样可以继续沿用。")],1)])}),[],!1,null,null,null);s.default=n.exports}}]);