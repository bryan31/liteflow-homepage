(window.webpackJsonp=window.webpackJsonp||[]).push([[685],{1147:function(t,e,v){"use strict";v.r(e);var _=v(8),o=Object(_.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("概念")]),t._v(" "),e("p",[t._v("在执行器执行流程时会分配唯一的一个数据槽给这个请求。不同请求的数据槽是完全隔离的。你可以理解为数据槽就是这个请求中的上下文，里面存放着此请求所有的数据。不同的组件之间是不传递参数的，所有的数据交互都是通过这个数据槽来实现的。")])]),t._v(" "),e("p",[t._v("LiteFlow提供了一个默认的SLOT实现："),e("code",[t._v("DefaultSlot")]),t._v("。这个默认的实现其实里面主要存储数据的容器就是一个Map。")]),t._v(" "),e("p",[t._v("比如可以通过"),e("code",[t._v("getRequestData")]),t._v("获得流程的初始参数，通过"),e("code",[t._v("getChainName")]),t._v("获取流程的命名，通过"),e("code",[t._v("setInput")]),t._v(","),e("code",[t._v("getInput")]),t._v(","),e("code",[t._v("setOutput")]),t._v(","),e("code",[t._v("getOutput")]),t._v("设置和获取属于某个组件专有的数据对象。当然也提供了最通用的方法"),e("code",[t._v("setData")]),t._v("和"),e("code",[t._v("getData")]),t._v("用来设置和获取业务的数据。")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("建议")]),t._v(" "),e("p",[e("code",[t._v("DefaultSlot")]),t._v("虽然可以用，但是在实际业务中，用这个会存在大量的弱类型，存取数据的时候都要进行强转，颇为不方便。所以官方建议你自己去实现自己的Slot。")])]),t._v(" "),e("p",[t._v("自己定义的Slot实质上就是一个最简单的值对象，只需继承"),e("code",[t._v("AbsSlot")]),t._v("就可以了。自己定义的Slot因为是强类型，更加贴合业务。")]),t._v(" "),e("h2",{attrs:{id:"slot中的一些方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#slot中的一些方法"}},[t._v("#")]),t._v(" Slot中的一些方法")]),t._v(" "),e("p",[t._v("无论你使用"),e("code",[t._v("DefaultSlot")]),t._v("还是自定义的Slot，Slot会有一些元方法供大家调用：")]),t._v(" "),e("p",[t._v("getRequestId()：每一个链路在执行初期都会生成这个链路的唯一ID，同时这个ID也会打印在日志中。方便于追踪。这个方法能得到这个链路追踪ID。")]),t._v(" "),e("p",[t._v("getRequestData()：获取链路的初始参数。")]),t._v(" "),e("p",[t._v("getChainName()：获取链路的名称。")]),t._v(" "),e("p",[t._v("getException()：得到链路中的异常信息，如果没有就为null。")]),t._v(" "),e("p",[t._v("getExecuteStepStr()：得到链路中的执行步骤信息。")]),t._v(" "),e("p",[t._v("setData(K,V)：往slot中设置一个值。")]),t._v(" "),e("p",[t._v("getData(K)：从Slot里得到一个值。")]),t._v(" "),e("h2",{attrs:{id:"slot的数量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#slot的数量"}},[t._v("#")]),t._v(" Slot的数量")]),t._v(" "),e("p",[t._v("在LiteFlow的配置中，提供一个slotSize的参数可以去配置初始化数量，但是这个默认值就是1024，在2.6.0版本中，当slot容量不够时，会按照0.75的因子去进行自动扩容。所以这个值不推荐主动配置。除非有特殊情况。")])])}),[],!1,null,null,null);e.default=o.exports}}]);