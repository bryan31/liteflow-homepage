(window.webpackJsonp=window.webpackJsonp||[]).push([[735],{1198:function(t,a,s){"use strict";s.r(a);var e=s(8),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),a("p",[t._v("2.13.0是一个不完全向下兼容的版本。为什么说不完全，因为大部分用户应该是能兼容的。少部分用户涉及到以下这些内容的都必须按照指南来升级。")]),t._v(" "),a("p",[t._v("这份升级指南只适用从2.12.X升级到2.13.0版本。")]),t._v(" "),a("p",[t._v("如果你在使用的LiteFlow为更老的版本，请逐级阅读升级文档。")]),t._v(" "),a("p",[t._v("比如你现在使用的是2.10.X版本，想升到2.13.0。必须请依此阅读"),a("code",[t._v("2.12.0升级指南")]),t._v("，"),a("code",[t._v("2.12.4升级指南")]),t._v(","),a("code",[t._v("2.13.0升级指南")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"不兼容点1-java插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不兼容点1-java插件"}},[t._v("#")]),t._v(" 不兼容点1：java插件")]),t._v(" "),a("p",[t._v("如果你之前在使用")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.yomahub"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("liteflow-script-java"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.12.X"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("那么很可惜，它在新版本中已经不提供了。当然你仍然可以使用以前的版本，它的最后一个版本为"),a("code",[t._v("2.12.4.5")]),t._v("。")]),t._v(" "),a("p",[t._v("建议大家把java插件往"),a("code",[t._v("javax-pro")]),t._v("上进行迁移，当然"),a("code",[t._v("javax")]),t._v("插件仍旧提供并会继续迭代的。")]),t._v(" "),a("p",[t._v("具体关于这几个java脚本插件的区别以及各个使用方法，请参照"),a("RouterLink",{attrs:{to:"/pages/2b8afb/"}},[t._v("Java脚本插件")]),t._v("。")],1),t._v(" "),a("h2",{attrs:{id:"不兼容点2-线程池相关的改动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不兼容点2-线程池相关的改动"}},[t._v("#")]),t._v(" 不兼容点2：线程池相关的改动")]),t._v(" "),a("p",[t._v("以下原先的配置在新版本中全部失效：")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#when节点全局异步线程池最大线程数，默认为16")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("liteflow.when-max-workers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("16")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#when节点全局异步线程池等待队列数，默认为512")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("liteflow.when-queue-limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("512")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#并行节点的线程池Builder，LiteFlow提供了默认的Builder")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("liteflow.thread-executor-class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("com.yomahub.liteflow.thread.LiteFlowDefaultWhenExecutorBuilder")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#并行循环子项线程池最大线程数，默认为16")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("liteflow.parallel-max-workers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("16")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#并行循环子项线程池等待队列数，默认为512")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("liteflow.parallel-queue-limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("512")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#并行循环子项的线程池Builder，LiteFlow提供了默认的Builder")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("liteflow.parallel-loop-executor-class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("com.yomahub.liteflow.test.customThreadPool.CustomThreadBuilder")]),t._v("\n")])])]),a("p",[t._v("以下2个配置在新版本中合成一套配置：")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#全局异步节点线程池大小，默认为64")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("liteflow.global-thread-pool-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("64")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#全局异步节点线程池队列大小，默认为512")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("liteflow.global-thread-pool-queue-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("512")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#全局异步节点线程池自定义Builder，LiteFlow提供了默认的线程池Builder")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("liteflow.global-thread-pool-executor-class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("com.yomahub.liteflow.thread.LiteFlowDefaultGlobalExecutorBuilder")]),t._v("\n")])])]),a("p",[t._v("默认线程池大小也改为了64。when和异步循环默认都受一个线程池影响。\n新版本给予了线程池方面非常大的自由度。如果你想把线程池分的更细点，请参照"),a("RouterLink",{attrs:{to:"/pages/02b08a/"}},[t._v("组件异步层面的线程池")]),t._v("这一小节。")],1),t._v(" "),a("h2",{attrs:{id:"不兼容点3-elbus的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不兼容点3-elbus的操作"}},[t._v("#")]),t._v(" 不兼容点3：ELBus的操作")]),t._v(" "),a("p",[t._v('原先ELBus.then("a", "b")).toEL()，会输出THEN(node("a"), node("b"))。')]),t._v(" "),a("p",[t._v("新版本则直接输出THEN(a,b)。")]),t._v(" "),a("p",[t._v("这个请知晓，但不涉及代码改动。")]),t._v(" "),a("p",[t._v("如果以前曾经使用ELBus.commonNode方法的同学，这次这个方法被删除了，变成了ELBus.element。")]),t._v(" "),a("p",[t._v("关于node方法和element方法的区别请参考"),a("RouterLink",{attrs:{to:"/pages/a3cb4b/#在节点上设置子关键字"}},[t._v("在节点上设置关键字")]),t._v("。")],1),t._v(" "),a("h2",{attrs:{id:"不兼容点4-注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不兼容点4-注释"}},[t._v("#")]),t._v(" 不兼容点4：注释")]),t._v(" "),a("p",[t._v("在新版本中，以前注释的写法不再支持：")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("chain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("chain1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    //我是注释\n    THEN(a, b, WHEN(c, d))\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("chain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("从2.13.0开始，只支持/** **/这种注释，不支持单行注释//")]),t._v(" "),a("p",[t._v("并且/** **/这种注释也不能夹在表达式当中，比如以下形式就是不行的：")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("chain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("chain1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    THEN(\n        a,b,\n        /** 我是注释 **/\n        WHEN(c, d)\n    )\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("chain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("大家会不会奇怪，原先支持的形式更多，现在新版本怎么反而还降级了呢？")]),t._v(" "),a("p",[t._v("这是因为原先是靠正则去去除注释的，正则在解析的时候会耗费大量的性能。而底层表达式本身在处理语法的时候就支持单行注释。所以相较之下，还是选择了性能优先，舍弃注释的便捷性。")])])}),[],!1,null,null,null);a.default=n.exports}}]);